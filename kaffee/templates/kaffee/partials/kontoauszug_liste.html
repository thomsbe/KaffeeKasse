<table id="kontoauszug-list" class="table table-zebra table-bordered w-full rounded-lg overflow-hidden">
  <thead>
    <tr>
      <th>Typ</th>
      <th>Datum</th>
      <th>Betrag</th>
      <th>Beschreibung</th>
      <th>Markierung</th>
    </tr>
  </thead>
  <tbody>
    {% for bewegung in page_obj %}
      <tr>
        <td>
          {% if bewegung.typ == 'GELD' %}
            <span title="Geldeinlage" class="inline-flex items-center gap-2"><span class="text-xl">ðŸ’¶</span><span class="badge badge-success">{{ bewegung.get_typ_display }}</span></span>
          {% elif bewegung.typ == 'KAFFEE' %}
            <span title="Kaffeebohnen" class="inline-flex items-center gap-2"><span class="text-xl">ðŸ«˜</span><span class="badge badge-primary">{{ bewegung.get_typ_display }}</span></span>
          {% elif bewegung.typ == 'KONSUM' %}
            <span title="Kaffeekonsum" class="inline-flex items-center gap-2"><span class="text-xl">â˜•</span><span class="badge badge-info">{{ bewegung.get_typ_display }}</span></span>
          {% else %}
            <span class="badge badge-neutral">{{ bewegung.get_typ_display }}</span>
          {% endif %}
        </td>
        <td>{{ bewegung.datum }}</td>
        <td class="font-mono {% if bewegung.saldo_wert < 0 %}text-red-600{% elif bewegung.saldo_wert > 0 %}text-green-700{% endif %}">
          {% if bewegung.typ == 'GELD' %}
            {{ bewegung.wert_euro|floatformat:2 }} â‚¬
          {% elif bewegung.typ == 'KAFFEE' %}
            {{ bewegung.menge_gramm }}g
            {{ bewegung.wert_euro|default:'-' }} â‚¬
          {% elif bewegung.typ == 'KONSUM' %}
            {% if bewegung.mahlvorgaenge %}{{ bewegung.mahlvorgaenge }}x Mahlen{% endif %}
            {{ bewegung.saldo_wert|floatformat:2 }} â‚¬
          {% elif bewegung.typ == 'SONSTIGES' %}
            {{ bewegung.beschreibung|default:'-' }}
            {{ bewegung.wert_euro|floatformat:2 }} â‚¬
          {% endif %}
        </td>
        <td>{{ bewegung.beschreibung|default:"-" }}</td>
        <td><span id="markierung-{{ bewegung.id }}">
          {% if bewegung.typ == "KONSUM" %}
            {% if bewegung.ist_markiert %}
              {% include "kaffee/partials/markiert_badge.html" %}
            {% else %}
              {% include "kaffee/partials/markierung_button.html" %}
            {% endif %}
          {% endif %}
        </span></td>
      </tr>
    {% empty %}
      <tr><td colspan="5" class="py-3 text-center text-base-content/60">Keine Kontobewegungen vorhanden.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% if has_next %}
  <button
    hx-get="{% url 'kontoauszug' %}?page={{ next_page }}"
    hx-target="#kontoauszug-list"
    hx-swap="afterend"
    class="btn btn-outline btn-sm w-full mt-2"
  >Mehr laden</button>
{% endif %}
